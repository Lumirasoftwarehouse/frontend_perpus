import{d as h,o as l,c as i,a as s,e as c,n as k,f as r,g as S,h as w,u as D,t as d,w as m,v as p,F as _,i as C,r as U}from"./index-128ba08c.js";import{S as j,N as T,F}from"./Footer-92859795.js";import{a as b}from"./axios-21b846bc.js";import{P as g,D as N}from"./jquery.dataTables-c0423ad7.js";const x={id:"wrapper"},A={id:"content-wrapper",class:"d-flex flex-column"},B={id:"content"},P={class:"container-fluid mt-4"},V=s("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Program Sosial",-1),L={class:"table-responsive"},$={key:0,class:"preloader"},I=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"No"),s("th",{scope:"col"},"Aksi"),s("th",{scope:"col"},"Image"),s("th",{scope:"col"},"Judul"),s("th",{scope:"col"},"Owner"),s("th",{scope:"col"},"Status")])],-1),O={scope:"row"},z={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},J=["onClick"],R=s("i",{class:"bi bi-info"},null,-1),q=[R],E=["onClick"],M=s("i",{class:"bi bi-pencil-square"},null,-1),G=[M],H=s("button",{type:"button",class:"btn btn-danger"},[s("i",{class:"bi bi-trash-fill"})],-1),K={key:0,class:"bg-warning text-white rounded text-center"},Q={key:1,class:"bg-success text-white rounded text-center"},W={class:"modal fade",id:"modalDetail",tabindex:"-1",role:"dialog","aria-labelledby":"modalDetailLabel","aria-hidden":"true",ref:"modalDetailRef"},X={class:"modal-dialog modal-dialog-centered",role:"document"},Y={class:"modal-content"},Z=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"modalDetailLabel"}," Detail Program Sosial "),s("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")])],-1),ss={class:"modal-body"},es={class:"row"},ts=s("div",{class:"col-md-4"},null,-1),as={class:"col-md-8"},os={class:"modal-title mb-3"},ls={class:"text-muted mb-3"},ds=s("p",null,[C("Status: "),s("span",{class:"badge badge-success"},"Aktif")],-1),is=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ")],-1),ns={class:"modal fade",id:"modalUpdate",tabindex:"-1",role:"dialog","aria-labelledby":"modalUpdateLabel","aria-hidden":"true",ref:"modalUpdateRef"},rs={class:"modal-dialog modal-dialog-centered",role:"document"},cs={class:"modal-content"},us=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"modalUpdateLabel"}," Update Program Sosial "),s("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")])],-1),hs={class:"modal-body"},ms={class:"mb-3"},ps=s("label",{for:"judul",class:"form-label"},"Image",-1),_s={class:"mb-3"},bs=s("label",{for:"judul",class:"form-label"},"Judul",-1),gs={class:"mb-3"},vs=s("label",{for:"deskripsiSosial",class:"form-label"},"Deskripsi",-1),fs={class:"modal-footer"},ys=s("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);g.use(N);const ks={data(){return{dataSosial:[],dataselect:[],ready:!1}},methods:{setData(e){this.dataselect=e},async updateSosial(){try{const e=new FormData;e.append("image",this.dataselect.image),e.append("judul",this.dataselect.judul),e.append("deskripsi",this.dataselect.deskripsi);const n=await b.post(`http://127.0.0.1:8000/api/sosial/update-sosial/${this.dataselect.id}`,e,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(n.data),this.updateTrend="",this.fetchTrends(),this.showAlert("Success","Trend berhasil diupdate","success")}catch(e){console.error(e),this.showAlert("Oops...","Terjadi kesalahan saat mengupdate trend","error")}},async fetchDataSosial(){try{const e=await b.get("http://127.0.0.1:8000/api/sosial/list-sosial",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.dataSosial=e.data.data,this.ready=!0}catch(e){console.error(e)}},handleFileUpload(e){this.dataselect.image=e.target.files[0]}},created(){this.fetchDataSosial()}},Us=Object.assign(ks,{__name:"ProgramSosial",setup(e){const n=h(!1),u=h(""),v=()=>{n.value=!n.value,u.value=n.value?"toggle-sidebar":""};return(t,o)=>(l(),i(_,null,[s("div",x,[c(j,{class:k(u.value)},null,8,["class"]),s("div",A,[s("div",B,[c(T,{onToggleSidebar:v}),s("div",P,[V,s("div",L,[t.ready?r("",!0):(l(),i("div",$)),t.ready?(l(),S(D(g),{key:1,class:"display table table-striped"},{default:w(()=>[I,s("tbody",null,[(l(!0),i(_,null,U(t.dataSosial,(a,f)=>(l(),i("tr",{key:a.id},[s("th",O,d(f+1),1),s("td",null,[s("div",z,[s("button",{type:"button",class:"btn btn-primary","data-toggle":"modal","data-target":"#modalDetail",onClick:y=>t.setData(a)},q,8,J),s("button",{type:"button",class:"btn btn-warning","data-toggle":"modal","data-target":"#modalUpdate",onClick:y=>t.setData(a)},G,8,E),H])]),s("td",null,d(a.image),1),s("td",null,d(a.judul),1),s("td",null,d(a.owner_name),1),s("td",null,[a.status=="0"?(l(),i("div",K," Pending ")):r("",!0),a.status=="1"?(l(),i("div",Q," Active ")):r("",!0)])]))),128))])]),_:1})):r("",!0)])])]),c(F)])]),s("div",W,[s("div",X,[s("div",Y,[Z,s("div",ss,[s("div",es,[ts,s("div",as,[s("h5",os,"Judul: "+d(t.dataselect.judul),1),s("p",ls," Deskripsi: "+d(t.dataselect.deskripsi),1),ds,s("p",null,"Nama Owner: "+d(t.dataselect.owner_name),1)])])]),is])])],512),s("div",ns,[s("div",rs,[s("div",cs,[us,s("div",hs,[s("div",ms,[ps,s("input",{type:"file",class:"form-control",id:"image",onChange:o[0]||(o[0]=(...a)=>t.handleFileUpload&&t.handleFileUpload(...a))},null,32)]),s("div",_s,[bs,m(s("input",{type:"text",class:"form-control",id:"judul","onUpdate:modelValue":o[1]||(o[1]=a=>t.dataselect.judul=a)},null,512),[[p,t.dataselect.judul]])]),s("div",gs,[vs,m(s("textarea",{class:"form-control",id:"deskripsiSosial",rows:"3","onUpdate:modelValue":o[2]||(o[2]=a=>t.dataselect.deskripsi=a)},null,512),[[p,t.dataselect.deskripsi]])])]),s("div",fs,[ys,s("button",{type:"submit",class:"btn btn-primary",onClick:o[3]||(o[3]=a=>t.updateSosial())},"Update")])])])],512)],64))}});export{Us as default};
