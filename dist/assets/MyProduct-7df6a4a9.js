import{d as h,o as l,c as i,a as t,e as c,n as y,f as p,g as v,h as S,u as k,w,v as C,F as m,r as P,t as s}from"./index-128ba08c.js";import{S as B,N as D,F as M}from"./Footer-92859795.js";import{a as u}from"./axios-21b846bc.js";import{S as A}from"./sweetalert2.all-7c1ce996.js";import{P as _,D as x}from"./jquery.dataTables-c0423ad7.js";const T={id:"wrapper"},F={id:"content-wrapper",class:"d-flex flex-column"},N={id:"content"},L={class:"container-fluid mt-4"},z=t("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Price List",-1),V={class:"table-responsive"},q={key:0,class:"preloader"},I=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Action"),t("th",{scope:"col"},"Product"),t("th",{scope:"col"},"Category"),t("th",{scope:"col"},"Brand"),t("th",{scope:"col"},"Seller"),t("th",{scope:"col"},"Price"),t("th",{scope:"col"},"Margin"),t("th",{scope:"col"},"Stock"),t("th",{scope:"col"},"Desc")])],-1),R={scope:"row"},j={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},O=["onClick"],E=t("i",{class:"bi bi-pencil-square"},null,-1),H=[E],K=["onClick"],U=t("i",{class:"bi bi-trash-fill"},null,-1),G=[U],J={class:"modal fade",id:"modalMargin",tabindex:"-1",role:"dialog","aria-labelledby":"modalMarginLabel","aria-hidden":"true",ref:"modalMarginRef"},Q={class:"modal-dialog modal-dialog-centered",role:"document"},W={class:"modal-content"},X=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"modalMarginLabel"},"Atur Margin"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"Ã—")])],-1),Y={class:"modal-body"},Z={class:"mb-3"},tt=t("label",{for:"margin",class:"form-label"},"Margin",-1),et={class:"modal-footer"},at=t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);_.use(x);const ot={data(){return{dataProduct:[],dataSelected:[],user_id:"",ready:!1,remainingTime:"Loading"}},methods:{setData(e){this.dataSelected=e},async updateSosial(){try{const e=new FormData;e.append("buyer_sku_code",this.dataSelected.buyer_sku_code),e.append("margin",this.dataSelected.margin);const o=await u.post("http://127.0.0.1:8000/api/product/margin-product",e,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});this.showAlert("Success","Margin product berhasil di atur","success")}catch(e){console.error(e),this.showAlert("Oops...","Terjadi kesalahan saat mengatur margin","error")}},async fetchDataProduct(){try{const e=await u.get("http://127.0.0.1:8000/api/product/list-product-pulsa-data",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.dataProduct=e.data.data,this.ready=!0}catch(e){console.error(e)}},confirmationDeleting(e){A.fire({title:"Konfirmasi Penghapusan",text:`Apakah Anda yakin ingin menghapus product ${e.product_name}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"red",cancelButtonColor:"grey",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(o=>{o.isConfirmed&&this.deleteProduct(e.id)})},deleteProduct(e){this.ready=!1,u.delete(`http://127.0.0.1:8000/api/product/delete-product/${e}`,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.showAlert("Request Success","Product berhasil dihapus","success"),this.fetchDataProduct()}).catch(o=>{this.showAlert("Request Failed","Product gagal dihapus","error"),console.error(o),this.ready=!0})},showAlert(e,o,n){this.$swal({title:e,text:o,icon:n}).then(()=>{$("#modalMargin").modal("hide")})}},created(){this.fetchDataProduct()}},it=Object.assign(ot,{__name:"MyProduct",setup(e){const o=h(!1),n=h(""),g=()=>{o.value=!o.value,n.value=o.value?"toggle-sidebar":""};return(r,d)=>(l(),i(m,null,[t("div",T,[c(B,{class:y(n.value)},null,8,["class"]),t("div",F,[t("div",N,[c(D,{onToggleSidebar:g}),t("div",L,[z,t("div",V,[r.ready?p("",!0):(l(),i("div",q)),r.ready?(l(),v(k(_),{key:1,class:"display table table-striped"},{default:S(()=>[I,t("tbody",null,[(l(!0),i(m,null,P(r.dataProduct,(a,b)=>(l(),i("tr",{key:a.id},[t("th",R,s(b+1),1),t("td",null,[t("div",j,[t("button",{type:"button",class:"btn btn-warning",onClick:f=>r.setData(a),"data-toggle":"modal","data-target":"#modalMargin"},H,8,O),t("button",{type:"button",class:"btn btn-danger",onClick:f=>r.confirmationDeleting(a)},G,8,K)])]),t("td",null,s(a.product_name),1),t("td",null,s(a.category),1),t("td",null,s(a.brand),1),t("td",null,s(a.seller_name),1),t("td",null,s(a.price),1),t("td",null,s(a.margin),1),t("td",null,s(a.stock),1),t("td",null,s(a.desc),1)]))),128))])]),_:1})):p("",!0)])])]),c(M)])]),t("div",J,[t("div",Q,[t("div",W,[X,t("div",Y,[t("div",Z,[tt,w(t("input",{type:"number",class:"form-control",id:"margin","onUpdate:modelValue":d[0]||(d[0]=a=>r.dataSelected.margin=a)},null,512),[[C,r.dataSelected.margin]])])]),t("div",et,[at,t("button",{type:"submit",class:"btn btn-primary",onClick:d[1]||(d[1]=a=>r.updateSosial())}," Simpan ")])])])],512)],64))}});export{it as default};
